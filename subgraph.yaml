specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - name: MasterContract
    kind: ethereum/contract
    network: mainnet
    source:
      address: "0x08C3A887865684f30351A0Ba6d683Aa9b539829a"
      abi: MasterContract
      startBlock: 7815848
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - MasterContract
      abis:
        - name: MasterContract
          file: ./abis/MasterContract.json
      callHandlers:
        - function: addNewVersion(address[])
          handler: updateContracts
      file: ./src/mappingMasterContract.ts
  - kind: ethereum/contract
    name: TokenFunctionsContract
    network: mainnet
    source:
      address: "0xDF50A17bF58dea5039B73683a51c4026F3c7224E"
      abi: Contract
      startBlock: 7815786
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Stake
      abis:
        - name: Contract
          file: ./abis/TokenFunctionsContract.json
      callHandlers:
        - function: addStake(address,uint256)
          handler: handleAddStake
      file: ./src/mappingTokenFunctions.ts
templates:
  - name: MemberRoles
    kind: ethereum/contract
    network: mainnet
    source:
      abi: MemberRoles
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Member
      abis:
        - name: MemberRoles
          file: ./abis/MemberRoles.json
      callHandlers:
        - function: payJoiningFee(address)
          handler: handlePayJoiningFee
      file: ./src/mappingMemberRole.ts
  - name: Pool1
    kind: ethereum/contract
    network: mainnet
    source:
      abi: Pool1
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Cover
      abis:
        - name: Pool1
          file: ./abis/Pool1.json
      callHandlers:
        - function: makeCoverBegin(address,bytes4,uint256[],uint16,uint8,bytes32,bytes32
          handler: handleNewCover
      file: ./src/mappingPool1.ts
